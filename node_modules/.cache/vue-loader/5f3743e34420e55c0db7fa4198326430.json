{"remainingRequest":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/steini/Documents/GitHub/Mousikal-client/src/components/ArtistPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/steini/Documents/GitHub/Mousikal-client/src/components/ArtistPage.vue","mtime":1576164617198},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/cache-loader/dist/cjs.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/babel-loader/lib/index.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/cache-loader/dist/cjs.js","mtime":499166100000},{"path":"/Users/steini/Documents/GitHub/Mousikal-client/node_modules/vue-loader/lib/index.js","mtime":499166100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50cyBmcm9tICJAL2NvbXBvbmVudHMvQ29tbWVudHMudnVlIjsKCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmltcG9ydCB7IGdldEFydGlzdEFsYnVtcyB9IGZyb20gIi4uL2FwaS9zcG90aWZ5L3Nwb3RpZnkiOwppbXBvcnQgeyBnZXRBbGJ1bVRyYWNrcyB9IGZyb20gIi4uL2FwaS9zcG90aWZ5L3Nwb3RpZnkiOwoKaW1wb3J0IHsgZ2V0TGlrZXMgfSBmcm9tICIuLi9hcGkvcHJpdmF0ZS9wcml2YXRlIjsKaW1wb3J0IHsgY3JlYXRlTGlrZSB9IGZyb20gIi4uL2FwaS9wcml2YXRlL3ByaXZhdGUiOwppbXBvcnQgeyB1cGRhdGVMaWtlcyB9IGZyb20gIi4uL2FwaS9wcml2YXRlL3ByaXZhdGUiOwoKaW1wb3J0IHsgYWRkVXNlckluZm8gfSBmcm9tICIuLi9hcGkvYWNjb3VudC9Vc2VyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb21tZW50cwogIH0sCiAgcHJvcHM6IHsKICAgIGFydGlzdElEOiBTdHJpbmcsCiAgICBsb2dnZWRJblVzZXJOYW1lOiBTdHJpbmcsCiAgICBmYXZvcml0ZUFsYnVtOiBTdHJpbmcsCiAgICBhZ2U6IFN0cmluZywKICAgIHJlZ2lzdGVyZWQ6IEJvb2xlYW4KICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBhcnRpc3Q6ICIiLAogICAgYXJ0aXN0SW5mbzogW10sCiAgICBhbGJ1bUNsaWNrZWRPbjogZmFsc2UsCiAgICBjbGlja2VkQWxidW1JRDogIiIsCiAgICBjbGlja2VkT25JbmZvOiBbXSwKICAgIHRyYWNrczogW10sCiAgICBhbGJ1bUxpa2VzOiBbXQogIH0pLAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEFydGlzdEluZm8oaWQpIHsKICAgICAgdmFyIHIgPSBhd2FpdCBnZXRBcnRpc3RBbGJ1bXMoaWQpOwogICAgICB0aGlzLmFydGlzdEluZm8gPSByOwogICAgICB0aGlzLmV4dHJhY3RJbmZvKCk7CiAgICB9LAogICAgZXh0cmFjdEluZm8oKSB7CiAgICAgIHRoaXMuYXJ0aXN0ID0gdGhpcy5hcnRpc3RJbmZvWzBdLmFydGlzdDsKICAgICAgdGhpcy5hcnRpc3RJbmZvID0gXy51bmlxQnkodGhpcy5hcnRpc3RJbmZvLCAiaW1hZ2VVUkwiKTsKICAgICAgdGhpcy5hcnRpc3RJbmZvID0gXy51bmlxQnkodGhpcy5hcnRpc3RJbmZvLCAiYWxidW0iKTsKICAgIH0sCiAgICBhc3luYyBnZXRBbGJ1bURhdGEoYWxidW1JRCkgewogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZ2V0QWxidW1UcmFja3MoYWxidW1JRCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy50cmFja3NbaV0gPSByZXN1bHRbaV07CiAgICAgIH0KICAgIH0sCiAgICBhbGJ1bUNsaWNrZWQoYWxidW1JRCwgaW1hZ2VVUkwsIGFsYnVtTmFtZSkgewogICAgICB0aGlzLmFsYnVtQ2xpY2tlZE9uID0gdHJ1ZTsKICAgICAgdGhpcy5nZXRBbGJ1bURhdGEoYWxidW1JRCk7CiAgICAgIHRoaXMuY2xpY2tlZE9uSW5mb1swXSA9IGltYWdlVVJMOwogICAgICB0aGlzLmNsaWNrZWRPbkluZm9bMV0gPSBhbGJ1bU5hbWU7CiAgICAgIHRoaXMuY2xpY2tlZE9uSW5mb1syXSA9IGFsYnVtSUQ7CiAgICB9LAogICAgLy8gYWxidW1MaWtlZChpZCkgewogICAgLy8gICAvL3JldHVybiB0cnVlIGlmIGFsYnVtIGxpa2VkIGJ5IHVzZXIsIGVsc2UgcmV0dXJuIGZhbHNlCgogICAgLy8gfSwKICAgIGFsYnVtc0xpa2VDb3VudChhbGJ1bUlEKSB7CiAgICAgIHZhciBsaWtlTnVtID0gMDsKICAgICAgdGhpcy5hbGJ1bUxpa2VzLmZvckVhY2gobGlrZSA9PiB7CiAgICAgICAgaWYgKGFsYnVtSUQgPT0gbGlrZS5hbGJ1bUlEICYmIGxpa2UubGlrZWQgPT0gInRydWUiKSB7CiAgICAgICAgICBsaWtlTnVtKys7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGxpa2VOdW07CiAgICB9LAogICAgYXN5bmMgbGlrZUFsYnVtKGlkKSB7CiAgICAgIGF3YWl0IGNyZWF0ZUxpa2UoewogICAgICAgIHVzZXI6IHRoaXMubG9nZ2VkSW5Vc2VyTmFtZSwKICAgICAgICBhcnRpc3RJRDogdGhpcy5hcnRpc3RJRCwKICAgICAgICBhbGJ1bUlEOiBpZAogICAgICB9KTsKICAgICAgdGhpcy5hbGJ1bUxpa2VzLnB1c2goewogICAgICAgIGFsYnVtSUQ6IGlkLAogICAgICAgIGFydGlzdElEOiB0aGlzLmFydGlzdElELAogICAgICAgIGxpa2VkOiAidHJ1ZSIsCiAgICAgICAgdXNlcjogdGhpcy5sb2dnZWRJblVzZXJOYW1lCiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNraWZVc2VyTGlrZWQoYWxidW1JRCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYWxidW1MaWtlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICgKICAgICAgICAgIGFsYnVtSUQgPT0gdGhpcy5hbGJ1bUxpa2VzW2ldLmFsYnVtSUQgJiYKICAgICAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyTmFtZSA9PSB0aGlzLmFsYnVtTGlrZXNbaV0udXNlciAmJgogICAgICAgICAgdGhpcy5hbGJ1bUxpa2VzW2ldLmxpa2VkID09ICJ0cnVlIgogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBnZXRBbGxMaWtlc09mQWxidW0oaWQpIHsKICAgICAgdGhpcy5hbGJ1bUxpa2VzID0gYXdhaXQgZ2V0TGlrZXMoeyBhcnRpc3RJRDogaWQgfSk7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiYmVmb3JlIikKICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuYWxidW1MaWtlcyk7CiAgICAgIGlmKHRoaXMuYWxidW1MaWtlcyA9PSAwKSB7CiAgICAgICAgdGhpcy5hbGJ1bUxpa2VzID0gW3sKICAgICAgICBhbGJ1bUlEOiAwLAogICAgICAgIGFydGlzdElEOiAidGhpcy5hcnRpc3RJRCIsCiAgICAgICAgbGlrZWQ6ICJ0cnVlIiwKICAgICAgICB1c2VyOiAidGhpcy5sb2dnZWRJblVzZXJOYW1lIgogICAgICB9XQogICAgICB9CgogICAgICAvL3dpbmRvdy5jb25zb2xlLmxvZyhsaWtlcykKICAgIH0sCiAgICBhc3luYyB1bmxpa2VBbGJ1bShhbGJ1bUlEKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbGJ1bUxpa2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgYWxidW1JRCA9PSB0aGlzLmFsYnVtTGlrZXNbaV0uYWxidW1JRCAmJgogICAgICAgICAgdGhpcy5sb2dnZWRJblVzZXJOYW1lID09IHRoaXMuYWxidW1MaWtlc1tpXS51c2VyICYmCiAgICAgICAgICB0aGlzLmFsYnVtTGlrZXNbaV0ubGlrZWQgPT0gInRydWUiCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmFsYnVtTGlrZXMuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICBhd2FpdCB1cGRhdGVMaWtlcyh7IGxpa2VzOiB0aGlzLmFsYnVtTGlrZXMsIGFydGlzdElEOiB0aGlzLmFydGlzdElEIH0pOwogICAgfSwKICAgIGFzeW5jIHB1c2hVc2VySW5mbygpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJnb3QgdG8gcHVzaCB1c2VyIGluZm8iKTsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgcmVzID0gKGF3YWl0IGFkZFVzZXJJbmZvKHthZ2U6IHRoaXMuYWdlLCBmYXZBbGJ1bTogdGhpcy5mYXZvcml0ZUFsYnVtfSkpOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGVycikKICAgICAgfQogICAgfQogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGF3YWl0IHRoaXMuZ2V0QXJ0aXN0SW5mbyh0aGlzLmFydGlzdElEKTsKICAgIGlmKHRoaXMucmVnaXN0ZXJlZCA9PSB0cnVlKSB7CiAgICAgIHRoaXMucHVzaFVzZXJJbmZvKCkKICAgIH0KICAgIHRoaXMuZ2V0QWxsTGlrZXNPZkFsYnVtKHRoaXMuYXJ0aXN0SUQpOwogIH0KfTsK"},{"version":3,"sources":["ArtistPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArtistPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div v-if=\"!albumClickedOn\">\n      <div>\n        <h1>{{artist}}</h1>\n      </div>\n\n      <v-container>\n        <v-row dense>\n          <v-col v-for=\"album in artistInfo\" :key=\"album.albumID\" :cols=\"4\">\n            <v-card>\n              <v-img\n                v-on:click=\"albumClicked(album.albumID, album.imageURL, album.album)\"\n                :src=\"album.imageURL\"\n                class=\"white--text align-end\"\n                gradient=\"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)\"\n                height=\"auto\"\n                width=\"auto\"\n              ></v-img>\n              <v-card-actions>\n                <v-card-title>\n                  <span class=\"title font-weight-light\">{{album.album}}</span>\n                </v-card-title>\n                <div v-if=\"loggedInUserName!='Anonymous'\">\n                  <v-btn icon v-if=\"!checkifUserLiked(album.albumID)\">\n                    <v-icon color=\"gray\" v-on:click=\"likeAlbum(album.albumID)\">mdi-heart</v-icon>\n                  </v-btn>\n                  <v-btn icon v-if=\"checkifUserLiked(album.albumID)\">\n                    <v-icon color=\"red\" v-on:click=\"unlikeAlbum(album.albumID)\">mdi-heart</v-icon>\n                  </v-btn>\n                  {{albumsLikeCount(album.albumID)}}\n                </div>\n              </v-card-actions>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </div>\n    <br />\n    <div v-if=\"albumClickedOn\">\n      <Comments\n        :loggedInUserName=\"this.loggedInUserName\"\n        :albumURL=\"clickedOnInfo[0]\"\n        :albumName=\"clickedOnInfo[1]\"\n        :tracks=\"this.tracks\"\n        :artistName=\"this.artist\"\n        :albumID=\"clickedOnInfo[2]\"\n      ></Comments>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Comments from \"@/components/Comments.vue\";\n\nimport _ from \"lodash\";\nimport { getArtistAlbums } from \"../api/spotify/spotify\";\nimport { getAlbumTracks } from \"../api/spotify/spotify\";\n\nimport { getLikes } from \"../api/private/private\";\nimport { createLike } from \"../api/private/private\";\nimport { updateLikes } from \"../api/private/private\";\n\nimport { addUserInfo } from \"../api/account/User\";\n\nexport default {\n  components: {\n    Comments\n  },\n  props: {\n    artistID: String,\n    loggedInUserName: String,\n    favoriteAlbum: String,\n    age: String,\n    registered: Boolean\n  },\n  data: () => ({\n    artist: \"\",\n    artistInfo: [],\n    albumClickedOn: false,\n    clickedAlbumID: \"\",\n    clickedOnInfo: [],\n    tracks: [],\n    albumLikes: []\n  }),\n  methods: {\n    async getArtistInfo(id) {\n      var r = await getArtistAlbums(id);\n      this.artistInfo = r;\n      this.extractInfo();\n    },\n    extractInfo() {\n      this.artist = this.artistInfo[0].artist;\n      this.artistInfo = _.uniqBy(this.artistInfo, \"imageURL\");\n      this.artistInfo = _.uniqBy(this.artistInfo, \"album\");\n    },\n    async getAlbumData(albumID) {\n      let result = await getAlbumTracks(albumID);\n      for (var i = 0; i < result.length; i++) {\n        this.tracks[i] = result[i];\n      }\n    },\n    albumClicked(albumID, imageURL, albumName) {\n      this.albumClickedOn = true;\n      this.getAlbumData(albumID);\n      this.clickedOnInfo[0] = imageURL;\n      this.clickedOnInfo[1] = albumName;\n      this.clickedOnInfo[2] = albumID;\n    },\n    // albumLiked(id) {\n    //   //return true if album liked by user, else return false\n\n    // },\n    albumsLikeCount(albumID) {\n      var likeNum = 0;\n      this.albumLikes.forEach(like => {\n        if (albumID == like.albumID && like.liked == \"true\") {\n          likeNum++;\n        }\n      });\n      return likeNum;\n    },\n    async likeAlbum(id) {\n      await createLike({\n        user: this.loggedInUserName,\n        artistID: this.artistID,\n        albumID: id\n      });\n      this.albumLikes.push({\n        albumID: id,\n        artistID: this.artistID,\n        liked: \"true\",\n        user: this.loggedInUserName\n      });\n    },\n    checkifUserLiked(albumID) {\n      for (var i = 0; i < this.albumLikes.length; i++) {\n        if (\n          albumID == this.albumLikes[i].albumID &&\n          this.loggedInUserName == this.albumLikes[i].user &&\n          this.albumLikes[i].liked == \"true\"\n        ) {\n          return true;\n        }\n      }\n      return false;\n    },\n    async getAllLikesOfAlbum(id) {\n      this.albumLikes = await getLikes({ artistID: id });\n      window.console.log(\"before\")\n      window.console.log(this.albumLikes);\n      if(this.albumLikes == 0) {\n        this.albumLikes = [{\n        albumID: 0,\n        artistID: \"this.artistID\",\n        liked: \"true\",\n        user: \"this.loggedInUserName\"\n      }]\n      }\n\n      //window.console.log(likes)\n    },\n    async unlikeAlbum(albumID) {\n      for (var i = 0; i < this.albumLikes.length; i++) {\n        if (\n          albumID == this.albumLikes[i].albumID &&\n          this.loggedInUserName == this.albumLikes[i].user &&\n          this.albumLikes[i].liked == \"true\"\n        ) {\n          this.albumLikes.splice(i, 1);\n        }\n      }\n      await updateLikes({ likes: this.albumLikes, artistID: this.artistID });\n    },\n    async pushUserInfo() {\n      window.console.log(\"got to push user info\");\n      try {\n        let res = (await addUserInfo({age: this.age, favAlbum: this.favoriteAlbum}));\n        return res;\n      } catch(err) {\n        window.console.log(err)\n      }\n    }\n  },\n  async mounted() {\n    await this.getArtistInfo(this.artistID);\n    if(this.registered == true) {\n      this.pushUserInfo()\n    }\n    this.getAllLikesOfAlbum(this.artistID);\n  }\n};\n</script>\n\n"]}]}